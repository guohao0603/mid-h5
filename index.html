<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0,maximum-scale=1.0, user-scalable=no">
    <title>中秋祝福</title>
    <link rel="stylesheet" href="./css/swiper.min.css">
    <link rel="stylesheet" href="./css/animate.min.css">
    <link rel="stylesheet" href="./css/main.css">
    <script>
        document.documentElement.style.fontSize = (document.documentElement.clientWidth / 750)*100 + 'px';
           /* safari上禁止缩放 */
        window.onload = function() {
            // 阻止双击放大
            var lastTouchEnd = 0;
            document.addEventListener('touchstart', function(event) {
                if (event.touches.length > 1) {
                    event.preventDefault();
                }
            });
            document.addEventListener('touchend', function(event) {
                var now = (new Date()).getTime();
                if (now - lastTouchEnd <= 300) {
                    event.preventDefault();
                }
                lastTouchEnd = now;
            }, false);

            // 阻止双指放大
            document.addEventListener('gesturestart', function(event) {
                event.preventDefault();
            });
        }
    </script>
</head>
<body>
    <div class="swiper-container">
        <div id="music" class="music-move"></div>
        <div class="swiper-wrapper">
          <div class="swiper-slide">
              <div class="ani page" 
                swiper-animate-effect="fadeIn" 
                swiper-animate-duration="0.5s" 
                swiper-animate-delay="0s"
              >
               <!-- 1.1-pic -->
                <div class="ani pic1" 
                    swiper-animate-effect="zoomIn"
                    swiper-animate-duration="1s" 
                    swiper-animate-delay="1s"
                >
                </div>
                <!-- 1.2-pic -->
                <div class="ani pic2"
                    swiper-animate-effect="zoomIn"
                    swiper-animate-duration="1s" 
                    swiper-animate-delay="1.5s"
                >
                </div>
                <!-- 1.3-pic -->
                <div class="ani pic3"
                    swiper-animate-effect="fadeInLeft"
                    swiper-animate-duration="1s" 
                    swiper-animate-delay="1.8s"
                ></div>
                <!-- 1.4-pic -->
                <div class="ani pic4"
                    swiper-animate-effect="fadeInRight"
                    swiper-animate-duration="1s" 
                    swiper-animate-delay="1.9s"
                >
                </div>
                <!-- 1.5-pic -->
                <div class="ani pic5" 
                    swiper-animate-effect="fadeInUp"
                    swiper-animate-duration="1s" 
                    swiper-animate-delay="2s"
                >
                    值此中秋佳节，祝您阖家欢乐，幸福美满！
                </div>
              </div>
          </div>
          <div class="swiper-slide">
            <div class="ani page" 
                swiper-animate-effect="fadeIn" 
                swiper-animate-duration="0.5s" 
                swiper-animate-delay="0.3s"
            >
                <!-- 2.1-pic -->
                <div class="ani two-pic1"
                    swiper-animate-effect="fadeInLeft" 
                    swiper-animate-duration="1s" 
                    swiper-animate-delay="0.5s"
                ></div>
                <!-- 2.2-pic -->
                <div class="ani two-pic2"
                    swiper-animate-effect="fadeInDown" 
                    swiper-animate-duration="1s" 
                    swiper-animate-delay="0.5s"
                ></div>
                <!-- 2.3-pic -->
                <div class="ani two-pic3"
                    swiper-animate-effect="zoomIn" 
                    swiper-animate-duration="1s" 
                    swiper-animate-delay="0.7s"
                >
                    <div class="ani two-pic3-bg"
                        swiper-animate-effect="zoomIn" 
                        swiper-animate-duration="1s" 
                        swiper-animate-delay="1s"
                    >
                        <p class="ani"
                            swiper-animate-effect="zoomIn" 
                            swiper-animate-duration="1s" 
                            swiper-animate-delay="1.3s"
                        >中秋佳节</p>
                    </div>
                </div>
                <!-- 2.4-pic -->
                <div class="ani two-pic4"
                    swiper-animate-effect="zoomIn" 
                    swiper-animate-duration="1s" 
                    swiper-animate-delay="0.7s"
                >
                    <div class="ani two-pic4-bg"
                        swiper-animate-effect="zoomIn" 
                        swiper-animate-duration="1s" 
                        swiper-animate-delay="1s"
                    >
                        <img src="./imgs/moon.jpg" alt="" 
                            swiper-animate-effect="zoomIn" 
                            swiper-animate-duration="1s" 
                            swiper-animate-delay="0.5s"
                        >
                    </div>
                </div>
                <!-- 2.5-pic -->
                <div class="ani two-pic5" 
                    swiper-animate-effect="fadeInDown" 
                    swiper-animate-duration="1s" 
                    swiper-animate-delay="1.3s"
                >
                    中秋节，又称月夕、秋节、仲秋节、
                    八月节、八月会、追月节、玩月节、拜月节、女儿节或团圆节，
                    是流行于中国众多民族与汉字文化圈诸国的传统文化节日，时在农历八月十五；
                    因其恰值三秋之半，故名。
                </div>
            </div>
          </div>
          <div class="swiper-slide">
            <div class="ani page" 
                swiper-animate-effect="fadeIn" 
                swiper-animate-duration="0.5s" 
                swiper-animate-delay="0.3s"
            >
                <!-- 3.1-pic -->
                <div class="ani two-pic1"
                    swiper-animate-effect="fadeInLeft" 
                    swiper-animate-duration="1s" 
                    swiper-animate-delay="0.5s"
                    >
                </div>
                <!-- 3.2-pic -->
                <div class="ani two-pic2"
                    swiper-animate-effect="fadeInDown" 
                    swiper-animate-duration="1s" 
                    swiper-animate-delay="0.5s"
                >
                </div>
                <!-- 3.3-pic -->
                <div class="ani two-pic3"
                    swiper-animate-effect="zoomIn" 
                    swiper-animate-duration="1s" 
                    swiper-animate-delay="0.7s"
                >
                    <div class="ani two-pic3-bg"
                        swiper-animate-effect="zoomIn" 
                        swiper-animate-duration="1s" 
                        swiper-animate-delay="1s"
                    >
                        <p class="ani"
                            swiper-animate-effect="zoomIn" 
                            swiper-animate-duration="1s" 
                            swiper-animate-delay="1.3s"
                        >节日传说</p>
                    </div>
                </div>
                <!-- 3.4-pic -->
                <div class="ani three-pic4"
                    swiper-animate-effect="zoomIn" 
                    swiper-animate-duration="1.5s" 
                    swiper-animate-delay="1.3s"
                >
                    <div class="ani three-pic4-left"
                        swiper-animate-effect="fadeInRight" 
                        swiper-animate-duration="1s" 
                        swiper-animate-delay="1.3s"
                    >
                        <span>嫦</span>
                        <span>娥</span>
                        <span>奔</span>
                        <span>月</span>
                    </div>
                    <div class="ani three-pic4-right"
                        swiper-animate-effect="fadeInLeft" 
                        swiper-animate-duration="1.5s" 
                        swiper-animate-delay="1.3s"
                    >
                        中国上古时代神话传说故事，讲述了嫦娥被逢蒙所逼，无奈之下，
                        吃下了仙药西王母赐给丈夫后羿的两粒不死之药后飞到了月宫的事情。
                    </div>
                </div>
                <!-- 3.5-pic -->
                <div class="ani three-pic5"
                    swiper-animate-effect="zoomIn" 
                    swiper-animate-duration="1.5s" 
                    swiper-animate-delay="1.3s"
                >
                    <div class="ani three-pic5-left"
                        swiper-animate-effect="fadeInLeft" 
                        swiper-animate-duration="1s" 
                        swiper-animate-delay="1.3s"
                    >
                        <span>玉</span>
                        <span>兔</span>
                        <span>捣</span>
                        <span>药</span>
                    </div>
                    <div class="ani three-pic5-right"
                        swiper-animate-effect="fadeInRight" 
                        swiper-animate-duration="1.5s" 
                        swiper-animate-delay="1.3s"
                    >
                        据说嫦娥身体变轻，开始升空时，
                        惶恐中抱起了一直喂养的白兔飞上了月亮之上。玉兔在月宫有一只捣药杵，
                        夜晚在药臼中捣制长生不老的灵药。
                    </div>
                </div>
            </div>
          </div>
          <div class="swiper-slide">
            <div class="ani page" 
                swiper-animate-effect="fadeIn" 
                swiper-animate-duration="0.5s" 
                swiper-animate-delay="0.3s"
            >
                <!-- 4.1-pic -->
                <div class="ani two-pic1"
                 swiper-animate-effect="fadeInLeft" 
                 swiper-animate-duration="1s" 
                 swiper-animate-delay="0.5s"
                 >
                </div>
                <!-- 4.2-pic -->
                <div class="ani two-pic2"
                    swiper-animate-effect="fadeInDown" 
                    swiper-animate-duration="1s" 
                    swiper-animate-delay="0.5s"
                >
                </div>
                <!-- 4.3-pic -->
                <div class="ani two-pic3"
                    swiper-animate-effect="zoomIn" 
                    swiper-animate-duration="1s" 
                    swiper-animate-delay="0.7s"
                >
                    <div class="ani two-pic3-bg"
                        swiper-animate-effect="zoomIn" 
                        swiper-animate-duration="1s" 
                        swiper-animate-delay="1s"
                    >
                        <p class="ani"
                            swiper-animate-effect="zoomIn" 
                            swiper-animate-duration="1s" 
                            swiper-animate-delay="1.3s"
                        >情满中秋</p>
                    </div>
                </div>
                <!-- 4.4-pic -->
                <div class="ani four-pic4">
                    <div class="ani four-pic4-border"
                        swiper-animate-effect="zoomIn" 
                        swiper-animate-duration="1s" 
                        swiper-animate-delay="1.2s"
                    >
                        <div class="ani four-pic4-content"
                            swiper-animate-effect="zoomIn" 
                            swiper-animate-duration="1s" 
                            swiper-animate-delay="1.2s"
                        >
                            <div class="ani four-pic4-img"
                                swiper-animate-effect="zoomIn" 
                                swiper-animate-duration="1s" 
                                swiper-animate-delay="2s"
                            ></div>
                        </div>
                    </div>
                    <div class="ani four-pic4-border"
                        swiper-animate-effect="zoomIn" 
                        swiper-animate-duration="1s" 
                        swiper-animate-delay="1.5s"
                    >
                        <div class="ani four-pic4-content"
                            swiper-animate-effect="zoomIn" 
                            swiper-animate-duration="1s" 
                            swiper-animate-delay="1.5s"
                        >
                            <div class="ani four-pic4-img2"
                                swiper-animate-effect="zoomIn" 
                                swiper-animate-duration="1s" 
                                swiper-animate-delay="2s"
                            ></div>
                        </div>
                    </div>
                </div>
                

                <!-- 4.6-pic -->
                <div class="ani four-pic6">
                    <div class="ani four-pic4-border"
                        swiper-animate-effect="zoomIn" 
                        swiper-animate-duration="1s" 
                        swiper-animate-delay="1.5s"
                    >
                        <div class="ani four-pic4-content"
                            swiper-animate-effect="zoomIn" 
                            swiper-animate-duration="1s" 
                            swiper-animate-delay="1.5s"
                        >
                            <div class="ani four-pic4-img3"
                                swiper-animate-effect="zoomIn" 
                                swiper-animate-duration="1s" 
                                swiper-animate-delay="2s"
                            ></div>
                        </div>
                    </div>
                    <div class="ani four-pic4-border"
                        swiper-animate-effect="zoomIn" 
                        swiper-animate-duration="1s" 
                        swiper-animate-delay="1.2s"
                    >
                        <div class="ani four-pic4-content"
                            swiper-animate-effect="zoomIn" 
                            swiper-animate-duration="1s" 
                            swiper-animate-delay="1.2s"
                        >
                            <div class="ani four-pic4-img4"
                                swiper-animate-effect="zoomIn" 
                                swiper-animate-duration="1s" 
                                swiper-animate-delay="1.5s"
                            ></div>
                        </div>
                    </div>
                </div>

                <div class="ani four-pic7"
                    swiper-animate-effect="zoomIn" 
                    swiper-animate-duration="1s" 
                    swiper-animate-delay="2s"
                >
                    祝大家中秋快乐!
                </div>
            </div>
          </div>
          <div class="swiper-slide">
            <div class="ani page" 
                swiper-animate-effect="fadeIn" 
                swiper-animate-duration="0.5s" 
                swiper-animate-delay="0.3s"
            >
                 <!-- 5.1-pic -->
                 <div class="ani two-pic1"
                 swiper-animate-effect="fadeInLeft" 
                 swiper-animate-duration="1s" 
                 swiper-animate-delay="0.5s"
                 >
                </div>
                <!-- 5.2-pic -->
                <div class="ani two-pic2"
                    swiper-animate-effect="fadeInDown" 
                    swiper-animate-duration="1s" 
                    swiper-animate-delay="0.5s"
                >
                </div>
                <!-- 5.3-pic -->
                <div class="ani two-pic3"
                    swiper-animate-effect="zoomIn" 
                    swiper-animate-duration="1s" 
                    swiper-animate-delay="0.7s"
                >
                    <div class="ani two-pic3-bg"
                        swiper-animate-effect="zoomIn" 
                        swiper-animate-duration="1s" 
                        swiper-animate-delay="1s"
                    >
                        <p class="ani"
                            swiper-animate-effect="zoomIn" 
                            swiper-animate-duration="1s" 
                            swiper-animate-delay="1.3s"
                        >视频测试</p>
                    </div>
                </div>
                <div class="ani five-video">
                    <div class="ani lin"
                        swiper-animate-effect="zoomIn" 
                        swiper-animate-duration="1s" 
                        swiper-animate-delay="1.5s"
                    >
                        <div id="mse"></div>
                    </div> 
                </div>
          </div>
           </div>
           <audio controls="controls" id='bgmedia' autoplay="autoplay" loop="loop" hidden>
             <source src="./audio/mid.mp3" type="audio/mpeg" />
           </audio>
        </div>
        <div id="arrow"></div>
</body>
<script src="./js/swiper.min.js"></script>
<script src="./js/swiper.animate.min.js"></script>
<script src="./js/xgplayer-browser.js"></script>
<script src="./js/xgplayer-mp4.js"></script>
<script>
      let music = document.getElementById('music');
      let audio = document.querySelector('#bgmedia');
      let player=new Player({
        id:'mse',
        url:'http://h5player.bytedance.com/video/mp4/xgplayer-demo-360p.mp4',
        width: '5rem',
        height: '6rem',
        playsinline: true, // 防止iphone 全屏
        ignores: ['time']  // 去掉控制选项
      })
      player.on('play',function(){
        player.play()
        audio.pause();
        music.classList.remove('music-move')
      })
      player.on('pause',function(){
          
      })
      let onClick = function(){
        if(audio.paused){
            player.pause()
            audio.play();
            music.classList.add('music-move')
        }else{
            audio.pause();
            music.classList.remove('music-move')
        }
      }
      music.addEventListener('click',onClick,false)
      
     
    //    //既然是微信的ready事件，只能在微信端使用
    //    document.addEventListener("WeixinJSBridgeReady", function () {
    //        audio.play();
    //    }, false);
    //     document.addEventListener("touchstart", function () {
    //         audio.play();
    //     }, false);
      let arrow = document.getElementById('arrow') // 获取arrow 的dom
      let swiper = new Swiper('.swiper-container', {
      direction: 'vertical', // 垂直滑动
      //~~~~~解决 手机上横向滑动的时候出现卡顿的bug  start~~~~~~~~
      observer: true,                  //修改swiper自己或子元素时，自动初始化swiper
      observeParents: true,            //修改swiper的父元素时，自动初始化swiper
      touchRatio: 1,                   //解决滑动卡顿
      longSwipesRatio:0.1,
      threshold: 10,                   //如果触摸距离小于该值滑块不会被拖动
      followFinger:false,  
      //~~~~~解决 手机上横向滑动的时候出现卡顿的bug end~~~~~~
      on:{
        init: function(){
            swiperAnimateCache(this); //隐藏动画元素 
            swiperAnimate(this); //初始化完成开始动画
            arrow.style.display = 'block'
        }, 
        slideChangeTransitionEnd: function(){ 
            swiperAnimate(this); //每个slide切换结束时也运行当前slide动画
            let active = this.activeIndex;
            if (active === 1 || active === 2 || active === 3 ){
                arrow.style.display = 'block'
                player.pause()
            }else if (active === 4){
                arrow.style.display = 'none'
            }
            //this.slides.eq(this.activeIndex).find('.ani').removeClass('ani'); 动画只展现一次，去除ani类名
        } 
     }
    });
  </script>
</html>